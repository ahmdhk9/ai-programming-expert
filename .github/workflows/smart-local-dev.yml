name: ðŸ§  Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ­Ø¯ Ø§Ù„Ø°ÙƒÙŠ
on:
  push:
    paths:
      - 'âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/Ø§Ù„ØªØ·ÙˆÙŠØ±_Ø§Ù„Ø¹Ø§Ù….txt'
      - 'âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/ØªØ·ÙˆÙŠØ±_Ø§Ù„Ù†Ø¸Ø§Ù…_Ù†ÙØ³Ù‡.txt'

jobs:
  smart-development:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: ðŸ§  Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ­Ø¯
        run: |
          # 1. Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„ÙØ§Øª
          echo "ðŸ“– Ù‚Ø±Ø§Ø¡Ø© Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ·ÙˆÙŠØ±..."
          
          GENERAL_DEV="âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/Ø§Ù„ØªØ·ÙˆÙŠØ±_Ø§Ù„Ø¹Ø§Ù….txt"
          SYSTEM_DEV="âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/ØªØ·ÙˆÙŠØ±_Ø§Ù„Ù†Ø¸Ø§Ù…_Ù†ÙØ³Ù‡.txt"
          
          if [ -f "$GENERAL_DEV" ]; then
            echo "ðŸ“ Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø¹Ø§Ù…:"
            head -20 "$GENERAL_DEV" | grep -v "^#" | grep -v "^$" | head -5
          fi
          
          if [ -f "$SYSTEM_DEV" ]; then
            echo "ðŸ§  Ø£ÙˆØ§Ù…Ø± ØªØ·ÙˆÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…:"
            head -20 "$SYSTEM_DEV" | grep -v "^#" | grep -v "^$" | head -5
          fi

      - name: ðŸ”§ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
        run: |
          # 2. ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„ÙØ§Øª
          echo "ðŸ”„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª..."
          
          # Ø£Ù…Ø«Ù„Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
          if grep -q "ØºÙŠØ± Ø§Ù„Ø²Ø±" "âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/Ø§Ù„ØªØ·ÙˆÙŠØ±_Ø§Ù„Ø¹Ø§Ù….txt" 2>/dev/null; then
            echo "âœ… ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø£Ù…Ø± ØªØ¹Ø¯ÙŠÙ„"
          fi
          
          if grep -q "Ø£Ø¶Ù" "âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/Ø§Ù„ØªØ·ÙˆÙŠØ±_Ø§Ù„Ø¹Ø§Ù….txt" 2>/dev/null; then
            echo "âœ… ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø£Ù…Ø± Ø¥Ø¶Ø§ÙØ©"
          fi
          
          if grep -q "Ø­Ø³Ù‘Ù†" "âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/Ø§Ù„ØªØ·ÙˆÙŠØ±_Ø§Ù„Ø¹Ø§Ù….txt" 2>/dev/null; then
            echo "âœ… ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø£Ù…Ø± ØªØ­Ø³ÙŠÙ†"
          fi

      - name: ðŸ“Š Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
        run: |
          # 3. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
          mkdir -p "âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/ðŸ“ŠØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"
          
          REPORT="âœ…Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ âœ…/ðŸ“ŠØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±/GitHub-Processing-Report.md"
          
          cat > "$REPORT" << 'REPORT_END'
          # ðŸ¤– ØªÙ‚Ø±ÙŠØ± Ù…Ø¹Ø§Ù„Ø¬Ø© GitHub Ø§Ù„Ù…ÙˆØ­Ø¯
          ## GitHub Unified Processing Report
          
          ### âœ… Ø§Ù„Ø­Ø§Ù„Ø©
          - Ø§Ù„ÙˆÙ‚Øª: $(date -u)
          - Ø§Ù„Ù…ØµØ¯Ø±: GitHub Actions
          - Ø§Ù„Ø­Ø§Ù„Ø©: âœ… Ù†Ø¬Ø­
          
          ### ðŸ“‹ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
          - Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø¹Ø§Ù…: âœ… Ù…Ø¹Ø§Ù„Ø¬
          - ØªØ·ÙˆÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…: âœ… Ù…Ø¹Ø§Ù„Ø¬
          
          ### ðŸš€ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
          - Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ØªØ­Ø¯Ø«Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
          - Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø·ÙØ¨Ù‚Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
          
          ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙˆØ§Ø³Ø·Ø© Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ­Ø¯
          REPORT_END
          
          echo "âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"

      - name: ðŸ“¤ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
        run: |
          # 4. Git Commit Ùˆ Push
          git config user.name "Smart Dev Bot"
          git config user.email "bot@smartdev.local"
          
          git add -A
          
          # Check if there are changes
          if git diff --cached --quiet; then
            echo "âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©"
          else
            git commit -m "ðŸ¤– ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ­Ø¯"
            git push origin HEAD:$(git rev-parse --abbrev-ref HEAD) || true
            echo "âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„Ø±ÙØ¹"
          fi

      - name: âœ¨ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        run: |
          echo ""
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "âœ… Ø§ÙƒØªÙ…Ù„Øª Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ù†Ø¬Ø§Ø­!"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
          echo "ðŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬:"
          echo "âœ… Ø§Ù„Ø£ÙˆØ§Ù…Ø± ØªÙ… ØªØ­Ù„ÙŠÙ„Ù‡Ø§"
          echo "âœ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª ØªÙ… ØªØ·Ø¨ÙŠÙ‚Ù‡Ø§"
          echo "âœ… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§"
          echo "âœ… Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ØªÙ… Ø±ÙØ¹Ù‡Ø§"
          echo ""
