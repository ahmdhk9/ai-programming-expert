<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ”¥ Hybrid Monitor Dashboard</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%);
      color: #00d4ff;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      padding: 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    h1 { text-align: center; margin: 20px 0; font-size: 32px; }
    .header {
      background: rgba(0, 212, 255, 0.1);
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      border: 2px solid #00d4ff;
      text-align: center;
    }
    .generation {
      font-size: 24px;
      font-weight: bold;
      margin: 10px 0;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .card {
      background: #1a1f2e;
      border: 1px solid #00d4ff20;
      border-radius: 10px;
      padding: 20px;
      transition: all 0.3s;
    }
    .card:hover {
      border-color: #00d4ff;
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
    }
    .card h3 {
      color: #00e5ff;
      margin-bottom: 15px;
      border-bottom: 2px solid #00d4ff30;
      padding-bottom: 10px;
    }
    .stat {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 6px;
      margin: 8px 0;
    }
    .stat-value {
      font-weight: bold;
      color: #4ade80;
      font-size: 18px;
    }
    .algorithm-item {
      background: rgba(0, 212, 255, 0.05);
      padding: 12px;
      border-radius: 6px;
      margin: 8px 0;
      border-left: 3px solid #00d4ff;
    }
    .algorithm-name {
      font-weight: bold;
      color: #00e5ff;
    }
    .algorithm-version {
      font-size: 12px;
      color: #888;
    }
    .progress-bar {
      background: rgba(0, 0, 0, 0.5);
      height: 6px;
      border-radius: 3px;
      overflow: hidden;
      margin: 8px 0;
    }
    .progress-fill {
      background: linear-gradient(90deg, #00d4ff, #00e5ff);
      height: 100%;
      width: 0%;
      transition: width 0.3s;
    }
    .controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    button {
      background: #00d4ff;
      color: #0f1419;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }
    button:hover {
      background: #00e5ff;
      transform: translateY(-2px);
    }
    .section {
      background: #1a1f2e;
      border: 1px solid #00d4ff20;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }
    .section h2 {
      color: #00e5ff;
      margin-bottom: 15px;
      border-bottom: 2px solid #00d4ff30;
      padding-bottom: 10px;
    }
    .dialogue {
      background: rgba(0, 212, 255, 0.05);
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      border-left: 4px solid #00d4ff;
    }
    .dialogue-question {
      color: #00e5ff;
      font-weight: bold;
      margin-bottom: 8px;
    }
    .dialogue-answer {
      color: #ddd;
      margin-left: 15px;
      font-size: 14px;
      margin-bottom: 8px;
    }
    .status {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
    }
    .status.learning { background: #4ade80; color: white; }
    .status.improving { background: #00d4ff; color: #0f1419; }
    .status.active { background: #ff9800; color: white; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ”¥ Hybrid Monitor Dashboard</h1>
    
    <div class="header">
      <div>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù‡Ø¬ÙŠÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</div>
      <div class="generation" id="generation">Ø¬ÙŠÙ„: -</div>
      <small id="last-update">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ø¢Ù†</small>
    </div>

    <div class="controls">
      <button onclick="updateDashboard()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
      <button onclick="startSelfDialogue()">ğŸ¤– Ø­ÙˆØ§Ø± Ø°Ø§ØªÙŠ</button>
      <button onclick="triggerImprovement()">âš¡ ØªØ­Ø³Ù†</button>
      <button onclick="viewReport()">ğŸ“Š ØªÙ‚Ø±ÙŠØ±</button>
    </div>

    <div class="grid">
      <div class="card">
        <h3>ğŸ§  Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª</h3>
        <div id="algorithms-list"></div>
      </div>

      <div class="card">
        <h3>ğŸ“š Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°Ø§ØªÙŠ</h3>
        <div class="stat">
          <span>Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</span>
          <span class="stat-value" id="learning-count">0</span>
        </div>
        <div class="stat">
          <span>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</span>
          <span class="stat-value" id="success-rate">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="success-bar" style="width: 0%;"></div>
        </div>
      </div>

      <div class="card">
        <h3>âœ¨ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª</h3>
        <div class="stat">
          <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª</span>
          <span class="stat-value" id="improvements-count">0</span>
        </div>
        <div class="stat">
          <span>Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
          <span class="stat-value" id="current-generation">1</span>
        </div>
        <span class="status improving">Ù…ØªØ·ÙˆØ± Ø°Ø§ØªÙŠØ§Ù‹</span>
      </div>

      <div class="card">
        <h3>ğŸ” Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©</h3>
        <div class="stat">
          <span>Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…ÙƒØªØ´ÙØ©</span>
          <span class="stat-value" id="issues-count">0</span>
        </div>
        <div class="stat">
          <span>Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­Ù„ÙˆÙ„Ø©</span>
          <span class="stat-value" id="solved-count">0</span>
        </div>
        <span class="status active">Ù†Ø´Ø·</span>
      </div>

      <div class="card">
        <h3>ğŸ’¬ Ø§Ù„Ø­ÙˆØ§Ø±Ø§Øª Ø§Ù„Ø°Ø§ØªÙŠØ©</h3>
        <div class="stat">
          <span>Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙˆØ§Ø±Ø§Øª</span>
          <span class="stat-value" id="dialogues-count">0</span>
        </div>
        <div class="stat">
          <span>Ø¢Ø®Ø± Ø­ÙˆØ§Ø±</span>
          <span class="stat-value" id="last-dialogue">-</span>
        </div>
        <span class="status learning">ÙŠØªØ¹Ù„Ù…</span>
      </div>

      <div class="card">
        <h3>ğŸš€ Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>
        <div class="stat">
          <span>Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©</span>
          <span class="stat-value">ÙÙˆØ±ÙŠ</span>
        </div>
        <div class="stat">
          <span>Ø¯Ù‚Ø© Ø§Ù„ÙƒØ´Ù</span>
          <span class="stat-value">99%</span>
        </div>
        <span class="status improving">Ù…Ø­Ø³Ù‘Ù†</span>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ¤– Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©</h2>
      <div id="detailed-algorithms"></div>
    </div>

    <div class="section">
      <h2>ğŸ’¬ Ø§Ù„Ø­ÙˆØ§Ø±Ø§Øª Ø§Ù„Ø°Ø§ØªÙŠØ© Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h2>
      <div id="dialogues-list"></div>
    </div>

    <div class="section">
      <h2>ğŸ“ˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ·ÙˆØ±</h2>
      <div id="evolution-stats"></div>
    </div>
  </div>

  <script>
    async function updateDashboard() {
      if (!window.hybridMonitor) {
        setTimeout(updateDashboard, 500);
        return;
      }

      const report = window.hybridMonitor.getHybridReport();
      
      // Update generation
      document.getElementById('generation').textContent = `Ø¬ÙŠÙ„: ${report.generation}`;
      document.getElementById('current-generation').textContent = report.generation;
      document.getElementById('last-update').textContent = `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${new Date().toLocaleTimeString('ar-SA')}`;

      // Update algorithms
      const algorithmsList = document.getElementById('algorithms-list');
      algorithmsList.innerHTML = report.algorithms.map(algo => `
        <div class="algorithm-item">
          <div class="algorithm-name">${algo.name}</div>
          <div class="algorithm-version">v${algo.version.toFixed(2)}</div>
        </div>
      `).join('');

      const detailedAlgos = document.getElementById('detailed-algorithms');
      detailedAlgos.innerHTML = report.algorithms.map(algo => `
        <div style="margin-bottom: 15px;">
          <strong style="color: #00e5ff;">${algo.name}</strong><br>
          <small>Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${algo.version.toFixed(2)}</small>
          <div class="progress-bar" style="margin-top: 8px;">
            <div class="progress-fill" style="width: ${(algo.version / 2) * 100}%;"></div>
          </div>
        </div>
      `).join('');

      // Update learning
      document.getElementById('learning-count').textContent = report.learning.total;
      const successRate = Math.round((window.hybridMonitor.calculateSuccessRate() * 100));
      document.getElementById('success-rate').textContent = successRate + '%';
      document.getElementById('success-bar').style.width = successRate + '%';

      // Update improvements
      document.getElementById('improvements-count').textContent = report.improvements;

      // Update monitoring
      document.getElementById('issues-count').textContent = report.issues;
      document.getElementById('solved-count').textContent = report.improvements;

      // Update dialogues
      document.getElementById('dialogues-count').textContent = report.dialogues;
      if (report.dialogues > 0) {
        document.getElementById('last-dialogue').textContent = `${report.dialogues} Ø­ÙˆØ§Ø±`;
      }

      // Display dialogues
      const dialoguesList = document.getElementById('dialogues-list');
      if (window.hybridMonitor.dialogues.length > 0) {
        dialoguesList.innerHTML = window.hybridMonitor.dialogues.slice(-3).map(d => `
          <div class="dialogue">
            <div class="dialogue-question">â“ ${d.exchanges[0]?.content || 'Ø³Ø¤Ø§Ù„'}</div>
            <div class="dialogue-answer">ğŸ’¡ ${d.exchanges[1]?.content?.insights?.[0]?.name || 'Ø¥Ø¬Ø§Ø¨Ø©'}</div>
            <small style="opacity: 0.6;">Ø§Ù„Ø¬ÙŠÙ„: ${d.generation}</small>
          </div>
        `).join('');
      } else {
        dialoguesList.innerHTML = '<div style="color: #666; text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­ÙˆØ§Ø±Ø§Øª Ø¨Ø¹Ø¯</div>';
      }
    }

    function startSelfDialogue() {
      if (!window.hybridMonitor) return;
      
      const dialogue = window.hybridMonitor.discussWithSelf('system-health');
      alert(`ğŸ’¬ Ø­ÙˆØ§Ø± Ø°Ø§ØªÙŠ:\n\nâ“ ${dialogue.exchanges[0].content}\n\nğŸ’¡ ØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­`);
      updateDashboard();
    }

    function triggerImprovement() {
      if (!window.hybridMonitor) return;
      
      window.hybridMonitor.performSelfImprovement();
      alert('âš¡ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ø³Ù† Ø§Ù„Ø°Ø§ØªÙŠ');
      updateDashboard();
    }

    function viewReport() {
      const report = window.hybridMonitor?.getHybridReport();
      if (!report) return;
      
      const json = JSON.stringify(report, null, 2);
      const blob = new Blob([json], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `hybrid-monitor-${new Date().toISOString()}.json`;
      a.click();
    }

    // Auto update
    updateDashboard();
    setInterval(updateDashboard, 5000);
  </script>
</body>
</html>
