<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#00d4ff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="AI Expert">
  <title>๐ค AI Programming Expert Platform</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text x='50' y='75' font-size='80' text-anchor='middle'>๐ค</text></svg>">
  <script>
    const hostname = window.location.hostname;
    const isLocalhost = hostname === 'localhost' || hostname === '127.0.0.1';
    const isReplit = hostname.includes('replit.dev') || hostname.includes('.replit');
    const isProduction = hostname.includes('vercel.app') || hostname.includes('firebaseapp.com');
    
    if (isReplit || isLocalhost) {
      window.BACKEND_URL = 'http://localhost:8000';
    } else if (isProduction) {
      window.BACKEND_URL = 'https://agent-backend-ahmd1.fly.dev';
    } else {
      window.BACKEND_URL = 'https://agent-backend-ahmd1.fly.dev';
    }
  </script>
  <!-- โก ุงููููุงุช ุงูุฃุณุงุณูุฉ ููุท - ุจุฏูู overhead -->
  <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
  <script src="/js/app.js"></script>
  <style>
    @keyframes slideIn {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(400px); opacity: 0; }
    }
  </style>
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect fill='%230f1419' width='180' height='180' rx='40'/><text x='90' y='135' font-size='140' text-anchor='middle'>๐ค</text></svg>">
</head>
<body>

<div class="phone-frame">
  <!-- Header -->
  <div class="header">
    <button class="header-btn back">โน</button>
    <div class="header-content">
      <div class="logo-section">
        <div class="logo-icon">๐ค</div>
        <div class="logo-text">
          <h1 class="header-title">AI Programming Expert</h1>
          <p class="developer-name">By ุงุญูุฏ ุงูุจุตุฑุงูู</p>
        </div>
      </div>
    </div>
    <button class="header-btn install" id="install-btn" onclick="installApp()" title="ุชูุตูุจ ุงูุชุทุจูู">โฌ๏ธ</button>
  </div>

  <!-- Content -->
  <div class="content-wrapper">

    <!-- Features Tab -->
    <div id="features" class="tab-pane active">
      <div class="section">
        <h2>๐ฏ ุงููููุฒุงุช ุงูุฃุณุงุณูุฉ</h2>
        <div class="features-grid">
          <div class="feature-card" onclick="askAI('ูู ููููู ูุชุงุจุฉ ููุฏ ุจู React ูููู ุจู...')">
            <div class="feature-icon">๐ป</div>
            <div class="feature-name">ุฅูุดุงุก ุงูููุฏ</div>
          </div>
          <div class="feature-card" onclick="askAI('ููุงู ุฎุทุฃ ูู ุงูููุฏ: ')">
            <div class="feature-icon">๐ง</div>
            <div class="feature-name">ุฅุตูุงุญ ุงูุฃุฎุทุงุก</div>
          </div>
          <div class="feature-card" onclick="askAI('ุณุงุนุฏูู ุจุชุตููู ูุงุฌูุฉ ูุณุชุฎุฏู ุญุฏูุซุฉ...')">
            <div class="feature-icon">๐จ</div>
            <div class="feature-name">ุชุตููู ุงููุงุฌูุงุช</div>
          </div>
          <div class="feature-card" onclick="askAI('ุดุฑุญ ูู ููููู: ')">
            <div class="feature-icon">๐</div>
            <div class="feature-name">ุดุฑุญ ุงูููุงููู</div>
          </div>
          <div class="feature-card" onclick="askAI('ุฃุญุชุงุฌ ูุณุงุนุฏุฉ ูู ููู...')">
            <div class="feature-icon">๐ง</div>
            <div class="feature-name">ููู ุงูููุฉ</div>
          </div>
          <div class="feature-card" onclick="askAI('ููู ูููููู ูุดุฑ ุงูุชุทุจูู...')">
            <div class="feature-icon">๐</div>
            <div class="feature-name">ุงููุดุฑ ุงูุฐูู</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tools Tab -->
    <div id="tools" class="tab-pane">
      <div class="section">
        <h2>โ๏ธ ุฃุฏูุงุช ูุณุงุนุฏุฉ ุฐููุฉ</h2>
        <div class="toolbox">
          <div class="tool" onclick="window.open('/archive/error-viewer.html', '_blank')">
            <div class="tool-icon">๐</div>
            <div class="tool-name">ูุฑุงูุจ ุงูุฃุฎุทุงุก</div>
          </div>
          <div class="tool" onclick="window.open('/archive/comprehensive-monitor.html', '_blank')">
            <div class="tool-icon">๐ฅ</div>
            <div class="tool-name">ูุฑุงูุจ ุดุงูู</div>
          </div>
          <div class="tool" onclick="window.open('/archive/ai-diagnosis.html', '_blank')">
            <div class="tool-icon">๐ค</div>
            <div class="tool-name">ุชุดุฎูุต ุฐูู</div>
          </div>
          <div class="tool" onclick="window.open('/hybrid-monitor.html', '_blank')">
            <div class="tool-icon">๐ฅ</div>
            <div class="tool-name">ูุฑุงูุจ ูุฌูู</div>
          </div>
          <div class="tool" onclick="window.open('/unified-dashboard.html', '_blank')">
            <div class="tool-icon">๐</div>
            <div class="tool-name">ููุญุฉ ููุญุฏุฉ</div>
          </div>
          <div class="tool" onclick="window.open('/auto-repair-dashboard.html', '_blank')">
            <div class="tool-icon">๐ง</div>
            <div class="tool-name">ุฅุตูุงุญ ุฐุงุชู</div>
          </div>
          <div class="tool" onclick="window.open('/smart-deployment.html', '_blank')">
            <div class="tool-icon">๐</div>
            <div class="tool-name">ูุดุฑ ุฐูู</div>
          </div>
          <div class="tool" onclick="window.open('/complete-system-dashboard.html', '_blank')">
            <div class="tool-icon">๐ฏ</div>
            <div class="tool-name">ุงููุธุงู ุงูููุญุฏ</div>
          </div>
          <div class="tool" onclick="window.open('/algorithm-health.html', '_blank')">
            <div class="tool-icon">๐ฌ</div>
            <div class="tool-name">ุตุญุฉ ุงูุฎูุงุฑุฒููุงุช</div>
          </div>
          <div class="tool" onclick="askAI('ุณุงุนุฏูู ุจุฅุนุงุฏุฉ ููููุฉ ุงูููุฏ ููุฃูุถู...')">
            <div class="tool-icon">๐</div>
            <div class="tool-name">ุฅุนุงุฏุฉ ููููุฉ</div>
          </div>
          <div class="tool" onclick="askAI('ููู ุฃุณุชุฎุฏู React ุจุดูู ุฃูุถู...')">
            <div class="tool-icon">โ๏ธ</div>
            <div class="tool-name">React</div>
          </div>
          <div class="tool" onclick="askAI('ูุง ุฃูุถู ููุงุนุฏ ุงูุจูุงูุงุช ูู...')">
            <div class="tool-icon">๐๏ธ</div>
            <div class="tool-name">ูุงุนุฏุฉ ุงูุจูุงูุงุช</div>
          </div>
          <div class="tool" onclick="askAI('ููู ุฃุชุนุงูู ูุน APIs...')">
            <div class="tool-icon">๐</div>
            <div class="tool-name">APIs</div>
          </div>
          <div class="tool" onclick="askAI('ููู ุฃุญูู ุงูุชุทุจูู ูู ุงููุฎุงุทุฑ...')">
            <div class="tool-icon">๐</div>
            <div class="tool-name">ุงูุฃูุงู</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Social Chat Tab -->
    <div id="social" class="tab-pane">
      <div class="social-container">
        <div class="social-header">
          <h2>๐ฅ ุชูุงุตู ุนุดูุงุฆู</h2>
        </div>

        <!-- Search State -->
        <div class="social-search" id="social-search">
          <div class="search-content">
            <div class="search-icon">๐</div>
            <h3>ุงุจุญุซ ุนู ุดุฎุต ุนุดูุงุฆู</h3>
            <p id="search-status">ุฌุงูุฒ ููุจุญุซ</p>
            <button class="find-btn" onclick="findRandomUser()">๐ฒ ุงุจุญุซ ุงูุขู</button>
          </div>
        </div>

        <!-- Loading State -->
        <div class="social-loading" id="social-loading" style="display: none;">
          <div class="loading-spinner"></div>
          <h3>ุฌุงุฑู ุงูุจุญุซ ุนู ุดุฎุต...</h3>
          <button class="cancel-btn" onclick="cancelSearch()">ุฅูุบุงุก</button>
        </div>

        <!-- Chat State -->
        <div class="social-chat" id="social-chat" style="display: none;">
          <div class="active-user-header">
            <div class="user-info">
              <div class="user-avatar" id="partner-avatar"></div>
              <div class="user-details">
                <h3 id="active-user-name"></h3>
                <p id="user-status" class="user-status">๐ข ูุชุตู</p>
              </div>
            </div>
            <div class="header-actions">
              <button class="header-icon-btn" onclick="toggleUserProfile()" title="ูุนูููุงุช">โน๏ธ</button>
              <button class="header-icon-btn" onclick="toggleEmojiPanel()" title="ุฅูููุฌู">๐</button>
              <button onclick="endConnection()" class="end-btn" title="ุฅููุงุก ุงูุงุชุตุงู">๐</button>
            </div>
          </div>

          <!-- User Profile Panel -->
          <div id="profile-panel" class="profile-panel" style="display: none;">
            <h4>ูุนูููุงุช ุงููุณุชุฎุฏู</h4>
            <div class="profile-info">
              <p><strong>ุงูุงุณู:</strong> <span id="profile-name"></span></p>
              <p><strong>ุงูุญุงูุฉ:</strong> <span id="profile-status">๐ข ูุชุตู</span></p>
              <p><strong>ูุนุฑู ุงูุฌูุณุฉ:</strong> <span id="profile-session" style="font-size: 11px; direction: ltr;"></span></p>
              <p><strong>ุนุฏุฏ ุงูุฑุณุงุฆู:</strong> <span id="profile-msg-count">0</span></p>
              <p id="profile-time"><strong>ุงููุฏุฉ:</strong> ูู ุชุญุณุจ</p>
            </div>
          </div>

          <!-- Emoji Panel -->
          <div id="emoji-panel" class="emoji-panel" style="display: none;">
            <div class="emoji-grid" id="emoji-grid"></div>
          </div>

          <div class="social-messages" id="social-messages"></div>

          <div class="typing-indicator-area" id="typing-area" style="display: none;">
            <div class="typing-dots">
              <span></span><span></span><span></span>
            </div>
            <span id="typing-user"></span>
          </div>

          <div class="social-input-area">
            <div class="social-input-wrapper">
              <button class="input-icon-btn" onclick="toggleTemplates()" title="ุฑุณุงุฆู ุณุฑูุนุฉ">โก</button>
              <input type="text" id="social-input" class="social-input-field" placeholder="ุงูุชุจ ุฑุณุงูุฉ..." onkeypress="handleSocialKeypress(event)" oninput="emitTyping()">
              <button class="search-btn" onclick="toggleSearchMessages()" title="ุจุญุซ">๐</button>
            </div>
            <div class="action-buttons">
              <button class="voice-btn" id="voice-chat-btn" onclick="toggleSocialVoiceChat()" title="ุชุญุฏุซ ุจุงูุตูุช">๐ค</button>
              <button class="social-save-btn" onclick="toggleSavedMessages()" title="ุงูุฑุณุงุฆู ุงููุญููุธุฉ">๐พ</button>
              <button class="social-send-btn" onclick="sendSocialMessage()" title="ุฅุฑุณุงู ุฑุณุงูุฉ">๐ค</button>
            </div>
          </div>

          <!-- Quick Reactions Panel -->
          <div id="quick-reactions" class="quick-reactions" style="display: none;">
            <button onclick="sendQuickReaction('๐')">๐</button>
            <button onclick="sendQuickReaction('โค๏ธ')">โค๏ธ</button>
            <button onclick="sendQuickReaction('๐')">๐</button>
            <button onclick="sendQuickReaction('๐ฒ')">๐ฒ</button>
            <button onclick="sendQuickReaction('๐ฅ')">๐ฅ</button>
            <button onclick="sendQuickReaction('โญ')">โญ</button>
          </div>

          <!-- Search Bar -->
          <div id="search-bar" class="search-bar" style="display: none;">
            <input type="text" id="search-input" placeholder="ุงุจุญุซ ูู ุงูุฑุณุงุฆู..." onkeyup="searchMessages(this.value)">
            <div id="search-results"></div>
          </div>

          <!-- Quick Templates Panel -->
          <div id="templates-panel" class="quick-templates" style="display: none;">
            <h5>ุฑุณุงุฆู ุณุฑูุนุฉ</h5>
            <div class="templates-grid">
              <button onclick="sendTemplate('ูุฑุญุจุงู ๐')">ูุฑุญุจุงู</button>
              <button onclick="sendTemplate('ููู ุญุงููุ')">ููู ุญุงููุ</button>
              <button onclick="sendTemplate('ุฃูุง ุจุฎูุฑ ุดูุฑุงู ๐')">ุจุฎูุฑ</button>
              <button onclick="sendTemplate('ููุชุงุฒ! ๐')">ููุชุงุฒ</button>
              <button onclick="sendTemplate('ูู ุฃูุช ูุชุงุญ ุงูุขูุ')">ูุชุงุญุ</button>
              <button onclick="sendTemplate('ูุชููู ุจุนุฏูู ๐')">ุจุนุฏูู</button>
              <button onclick="addCustomTemplate()">โ ุฅุถุงูุฉ</button>
            </div>
          </div>

          <!-- Saved Messages Panel -->
          <div id="saved-panel" class="saved-messages" style="display: none;">
            <h5>ุงูุฑุณุงุฆู ุงููุญููุธุฉ</h5>
            <div id="saved-list" class="saved-list"></div>
          </div>

          <!-- Recent Emojis Panel -->
          <div id="recent-emoji-panel" class="recent-emoji" style="display: none;">
            <h5>ุงูุฅูููุฌู ุงูุฃุฎูุฑุฉ</h5>
            <div id="recent-emoji-grid" class="emoji-grid"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- AI Chat Tab -->
    <div id="chat" class="tab-pane">
      <div class="chat-container">
        <div class="ai-header">
          <div class="ai-header-content">
            <h2>๐ค ุงูุฐูุงุก ุงูุตูุงุนู</h2>
            <p class="ai-status">ูุชุตู ูุฌุงูุฒ ููุญูุงุฑ</p>
          </div>
        </div>
        <div class="chat-messages" id="chat-messages">
          <div class="message ai-message">
            <span class="message-icon">๐ค</span>
            <div class="message-content">ูุฑุญุจุงู! ุงุณุฃููู ุนู ุฃู ููุถูุน ุจุฑูุฌู ๐</div>
          </div>
        </div>
        <div class="chat-input">
          <div class="chat-input-wrapper">
            <button class="chat-voice-btn" id="ai-voice-input" onclick="startAIVoiceListening()" title="ุงุณุฃู ุจุงูุตูุช">๐ค</button>
            <input type="text" id="chat-input" class="chat-input-field" placeholder="ุงุณุฃู ุนู ุฃู ุดูุก..." onkeypress="handleChatKeypress(event)">
            <button class="chat-send" onclick="sendChatMessage()">ุฅุฑุณุงู</button>
          </div>
          <button class="ai-voice-response-btn" id="ai-voice-response" onclick="toggleAIVoiceResponse()" title="ุงูุฑุฏ ุงูุตูุชู">๐</button>
        </div>
        <div class="chat-loading" id="chat-loading" style="display: none;">
          <span>โณ ุฌุงุฑู ุงูุชูููุฑ...</span>
        </div>
      </div>
    </div>

    <!-- Projects Tab -->
    <div id="projects" class="tab-pane">
      <div class="section">
        <div class="projects-header">
          <h2>๐ฆ ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน</h2>
          <button class="add-project-btn" onclick="showAddProjectModal()">โ ุฌุฏูุฏ</button>
        </div>
        <div class="projects-list" id="projects-list">
          <div class="project-item" onclick="showProjectDetails(0)">
            <div class="project-header">
              <h3>๐ฑ ุชุทุจูู ููุจ</h3>
              <span class="status-badge active">ูุดุท</span>
            </div>
            <div class="project-info">
              <div>React + Node.js</div>
              <div class="project-stats">๐ 1500 ุณุทุฑ โข โญ v1.0</div>
            </div>
          </div>
          <div class="project-item" onclick="showProjectDetails(1)">
            <div class="project-header">
              <h3>๐ฎ ูุนุจุฉ ููุจ</h3>
              <span class="status-badge pending">ูุงุฏู</span>
            </div>
            <div class="project-info">
              <div>JavaScript/Canvas</div>
              <div class="project-stats">๐ 800 ุณุทุฑ โข โญ v0.5</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Projects Details Modal -->
    <div id="project-details-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="project-title"></h2>
          <button class="modal-close" onclick="closeProjectModal()">โ</button>
        </div>
        <div id="project-details" class="modal-body"></div>
        <div class="modal-footer">
          <button class="btn-cancel" onclick="closeProjectModal()">ุฅุบูุงู</button>
          <button class="btn-edit" onclick="editProject()">โ๏ธ ุชุนุฏูู</button>
          <button class="btn-delete" onclick="deleteProject()">๐๏ธ ุญุฐู</button>
        </div>
      </div>
    </div>

    <!-- Profile Tab -->
    <div id="profile" class="tab-pane">
      <div class="section">
        <div class="profile-header">
          <h2>๐ค ุงูููู ุงูุดุฎุตู</h2>
          <button class="edit-profile-btn" onclick="toggleEditProfile()">โ๏ธ</button>
        </div>
        <div class="profile-card" id="profile-view">
          <div class="profile-item">
            <strong>ุงููุทูุฑ:</strong>
            <span id="profile-developer">ุงุญูุฏ ุงูุนูููู ุงูุชูููู ุงูุจุตุฑุงูู</span>
          </div>
          <div class="profile-item">
            <strong>ุงูุชุฎุตุต:</strong>
            <span id="profile-specialty">ููุฏุณุฉ ุงูุจุฑูุฌูุงุช ูุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
          </div>
          <div class="profile-item">
            <strong>ุงูุฅุตุฏุงุฑ:</strong>
            <span id="profile-version">v5.0</span>
          </div>
          <div class="profile-item">
            <strong>ุงูุฅุญุตุงุฆูุงุช:</strong>
            <span id="profile-stats">๐ฑ 2 ูุดุฑูุน โข ๐ค 1000+ ุณุคุงู</span>
          </div>
          <div class="profile-item">
            <strong>ูุนูููุงุช ุงููุธุงู:</strong>
            <div style="font-size: 12px; margin-top: 4px;">
              ๐ ุฌูุณุฉ ุญุงููุฉ: <span id="current-session">ูุชุตู</span><br>
              โฐ ุงูููุช: <span id="system-time">--:--</span><br>
              ๐ ุงูุงุชุตุงู: <span id="connection-status">โ ูุชุตู</span>
            </div>
          </div>
        </div>

        <!-- Edit Profile Form -->
        <div id="profile-edit" class="profile-edit" style="display: none;">
          <input type="text" id="edit-developer" placeholder="ุงุณู ุงููุทูุฑ" class="edit-input">
          <input type="text" id="edit-specialty" placeholder="ุงูุชุฎุตุต" class="edit-input">
          <button class="btn-save" onclick="saveProfile()">๐พ ุญูุธ</button>
          <button class="btn-cancel" onclick="toggleEditProfile()">ุฅูุบุงุก</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Bottom Navigation Bar -->
  <div class="bottom-bar">
    <button class="bar-btn active" onclick="setTab('features')">๐ฏ ูููุฒุงุช</button>
    <button class="bar-btn" onclick="setTab('tools')">โ๏ธ ุฃุฏูุงุช</button>
    <button class="bar-btn" onclick="setTab('chat')">๐ค ุฐูุงุก</button>
    <button class="bar-btn" onclick="setTab('projects')">๐ฆ ูุดุงุฑูุน</button>
    <button class="bar-btn" onclick="setTab('social')">๐ฅ ุชูุงุตู</button>
    <button class="bar-btn" onclick="setTab('profile')">๐ค ููู</button>
  </div>

</div>


</body>
</html>
